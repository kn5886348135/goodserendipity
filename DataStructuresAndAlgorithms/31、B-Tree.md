---
title: B-Tree
author: Louis
date: 2023-08-01 14:34:51
categories: 数据结构与算法
tags: [B-Tree]
---
&emsp;&emsp;[B 树](https://oi-wiki.org/ds/b-tree/)（[B-tree](https://en.wikipedia.org/wiki/B-tree)）是一种自平衡的树，能够保持数据有序。这种数据结构能够让查找数据、顺序访问、插入数据及删除的动作，都在对数时间内完成。树用多个节点储存元素。某些节点存在一定的关系，用连线表示。二叉树是一种特殊的树，每个节点最多有两个子树。二叉树常用于实现二叉搜索树和二叉堆。 而 AVL 树 是特殊的二叉树，是最早被发明的自平衡二叉查找树。B 树保留了自平衡的特点，但 B 树的每个节点可以拥有两个以上的子节点，因此 B 树是一种多路搜索树。在 B 树中，有两种节点：

> 内部节点（internal node）:存储了数据以及指向其子节点的指针。
> 叶子节点（leaf node）:与内部节点不同的是，叶子节点只存储数据，并没有子节点。

### B-Tree的历史

&emsp;&emsp;B 树是由 Rudolf Bayer 和 Edward M. McCreight 在波音研究实验室工作时发明的，目的是有效管理大型随机访问文件的索引页。基本假设是索引非常庞大，以至于主内存中只能容纳树的一小部分。 Bayer 和 McCreight 的论文[Organization and maintenance of large ordered indices](https://infolab.usc.edu/csci585/Spring2010/den_ar/indexing.pdf) 于 1970 年 7 月首次流传，后来发表在 Acta Informatica 上。

&emsp;&emsp;拜耳和麦克雷特从未解释过 B 代表什么（如果有的话）：波音、平衡、介于、宽阔、浓密和拜耳。McCreight 说过**你越多地思考 B 树中的 B 的含义，你就越能理解 B 树。**

&emsp;&emsp;2011 年，Google 开发了 C++ B 树，报告称与红黑树相比，小数据类型的内存使用量减少了 50-80%，并且提高了大数据集的性能。

### B-Tree的性质

1. 每个节点最多有 m 个子节点。
2. 每一个非叶子节点（除根节点）最少有 $ \lceil \dfrac{m}{2} \rceil $ 个子节点。
3. 如果根节点不是叶子节点，那么它至少有两个子节点。
4. 有 k 个子节点的非叶子节点拥有 k−1 个键，且升序排列，满足 k[i] &lt; k[i+1]。
5. 每个节点至多包含 2k-1 个键。
6. 所有的叶子节点都在同一层。

### B-Tree的查找

### B-Tree的遍历

### B-Tree的插入

### B-Tree的删除

### B-Tree的优点

1. 满足局部性原理
2. 每个节点存储的数据更多
3. 树的高度更低

&emsp;&emsp;AVL Tree，Red-Black Tree这些搜索二叉树的每个节点只能容纳一个数据，导致树的高度很高，逻辑上挨着的节点数据可能离得很远。

&emsp;&emsp;读写磁盘与内存的不同
>
> 1. 读写磁盘的速度相比内存读写慢很多。
> 2. 每次读写磁盘的单位要比读写内存的最小单位大很多。

&emsp;&emsp;因为读写磁盘的特点，对应的数据结构应该尽量的满足「局部性原理」：「当一个数据被用到时，其附近的数据也通常会马上被使用」。为了满足局部性原理， 所以应该将逻辑上相邻的数据在物理上也尽量存储在一起，这样才能减少读写磁盘的数量。

&emsp;&emsp;相比一个节点只能存储一个数据的 BST 类数据结构来，B-Tree更「胖」、更加「扁平」，即每个节点能容纳更多的数据， 这样就能降低树的高度，同时让逻辑上相邻的数据都能尽量存储在物理上也相邻的硬盘空间上，减少磁盘读写。
