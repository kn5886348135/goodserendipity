---
title: 斐波那契
author: Louis
date: 2023-04-17 23:01:10
categories: 数据结构与算法
tags: [斐波那契,fibonacci]
---

#### 斐波那契数列

&emsp;&emsp;[斐波那契数列](https://zh.wikipedia.org/wiki/%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0)定义
&emsp;&emsp;$F_0$ = 0
&emsp;&emsp;$F_1$ = 1
&emsp;&emsp;$F_n$ = $F_{n-1}$ + $F_{n-2}$ &emsp;(n &ge; 2)

&emsp;&emsp;可以用初等代数、线性代数、数论、组合数等方法求解，在计算机中一般使用递归求解。当n相当大的时候O(n)的时间复杂度可以使用矩阵快速幂技巧将递归加速到O($logN$)。
&emsp;&emsp;斐波那契的矩阵表示法，将$F_{n+2}$、$F_{n+1}$裂开，就是$F_{n+1}$ + $F_{n}$、$F_{n}$ + $F_{n-1}$，用矩阵表示如下
$$ \begin{bmatrix}
F_{n+2} & F_{n+1}\\
\end{bmatrix}
= { \begin{bmatrix}
F_{n+1} & F_{n}\\
 \end{bmatrix}
*
\begin{bmatrix}
1 & 1 \\
1 & 0 \\
 \end{bmatrix} } $$
&emsp;&emsp;同样地将2阶矩阵裂开如下
$$ \begin{bmatrix}
F_{n+1} & F_n \\
F_n & F_{n-1} \\
\end{bmatrix} = {
\begin{bmatrix}
F_n & F_{n-1} \\
F_{n-1} & F_{n-2} \\
\end{bmatrix}* \begin{bmatrix}
1 & 1 \\
1 & 0 \\
\end{bmatrix} } $$
&emsp;&emsp;则
$$ \begin{bmatrix}
F_{n+2} & F_{n+1}\\
\end{bmatrix}
= { \begin{bmatrix}
F_{2} & F_{1}\\
 \end{bmatrix}
*
\begin{bmatrix}
1 & 1 \\
1 & 0 \\
 \end{bmatrix}^{n} } $$

$$ \begin{bmatrix}
F_{n+1} & F_n \\
F_n & F_{n-1} \\
\end{bmatrix} = { \begin{bmatrix}
F_2 & F_1 \\
F_1 & F_0 \\
\end{bmatrix}* \begin{bmatrix} 1 & 1 \\ 1 & 0 \\ \end{bmatrix} }^{n-1} $$

#### 类似斐波那契的递归优化

&emsp;&emsp;如果某个递归，除了初始项之外，具有如下的形式F(N) = $C_1$ ${ \times }$ F(N) + $C_2$ ${\times }$ F(N-1) + … + $C_k$ ${\times}$ F(N-k) ( $C_1$…$C_k$ 和k都是常数)，并且这个递归的表达式是严格的、不随条件转移的(没有if等条件判断)，那么都存在类似斐波那契数列的优化，时间复杂度都能优化成O(logN)。可以按照矩阵乘法运算规则拿到一组方程，解出矩阵。
&emsp;&emsp;矩阵的n次幂，可以转化为2的整数次幂。预先计算矩阵的2、4、8、16、32、64...次幂，将n拆分成2的整数次幂的和，n=$a \times 2^0 + b \times 2^1 + c \times 2^2 + d \times 2^3 + e \times 2^4 + ...$，其中a、b、c、d、e只能取值0或者1。

##### 矩阵乘法运算规则

&emsp;&emsp;假设A=$(a_{ij})_{m \times s}$，B=$(b_{ij})_{s \times n}$，则A与B的乘积C满足

- 行数与（左矩阵）A相同，列数与（右矩阵）B相同，即C=$(c_{ij})_{m \times n}$
- C的第i行第i列的元素由A的第行元素与B的第列元素对应相乘，再取乘积之和

&emsp;&emsp;~~n阶行列式的定义，奇排列、偶排列。~~
&emsp;&emsp;上三角行列式、下三角行列式、对角行列式都等于主对角线元素相乘。对角线法则仅适用2阶、3阶行列式，4阶及以上需要用n阶行列式的定义。

$$\begin{bmatrix}
a_{11} & 0      & \cdots & 0 \\
a_{21} & a_{22}      & \cdots & 0 \\
\vdots & \vdots & \ddots & \vdots \\
a_{n1} & a_{n2} & \cdots & a_{nn}
\end{bmatrix}
 = \begin{bmatrix}
a_{11} & a_{12} & \cdots & a_{1n} \\
0      & a_{22} & \cdots & a_{2n} \\
\vdots & \vdots & \ddots & \vdots \\
0      & 0      & \cdots & a_{nn}
\end{bmatrix} = \begin{bmatrix}
a_{11} & 0      & \cdots & 0 \\
0      & a_{22} & \cdots & 0 \\
\vdots & \vdots & \ddots & \vdots \\
0      & 0      & \cdots & a_{nn}
\end{bmatrix} = a_{11} \times a_{22} \times a_{33} \times \cdots \times a_{nn} $$

---

##### 斐波那契问题

##### 爬台阶

&emsp;&emsp;一个人可以一次往上迈1个台阶，也可以迈2个台阶，返回这个人迈上N级台阶的方法数。

##### 奶牛问题

&emsp;&emsp;第一年农场有1只成熟的母牛A，往后的每年

- 每一只成熟的母牛都会生一只母牛
- 每一只新出生的母牛都在出生的第三年成熟
- 每一只母牛永远不会死
返回N年后牛的数量。

##### 铺瓷砖

&emsp;&emsp;用1 $ \times $ 2的瓷砖，把N $ \times $ 2的区域填满。返回铺瓷砖的方法数。
